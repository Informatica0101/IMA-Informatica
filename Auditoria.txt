AUDITORÍA DE ARCHIVOS - [A-38]
===================================================================

FECHA: 25/01/2026
TAREA: [A-38] Actualización de Lógica de Autenticación, UI y Soporte iOS PWA

-------------------------------------------------------------------
1. ARCHIVO: backend/user-service/Code.gs
-------------------------------------------------------------------
- Estado: Funcional, pero permitía duplicados por discrepancias de caja (Case-sensitive).
- Hallazgos:
  · registerUser: No normalizaba strings antes de comparar.
  · loginUser: Solo aceptaba email como identificador.
- Riesgos: Duplicidad de cuentas con el mismo correo (ej: User@Email.com vs user@email.com).
- Acción: Implementar .toLowerCase().trim() en registro (nombre y email) y login (identifier).

-------------------------------------------------------------------
2. ARCHIVO: js/auth.js
-------------------------------------------------------------------
- Estado: Funcional.
- Hallazgos:
  · El formulario de login enviaba 'email'.
  · No había auto-login tras registro.
- Riesgos: Fricción en la experiencia de usuario (UX).
- Acción: Cambiar 'email' por 'identifier' y redirigir a dashboard tras registro exitoso guardando datos en localStorage.

-------------------------------------------------------------------
3. ARCHIVO: login.html
-------------------------------------------------------------------
- Estado: UI con desajustes de alineación.
- Hallazgos:
  · Input de email era tipo "email" (limita login por usuario).
  · Header/Footer muy altos.
- Acción: Cambiar tipo a "text", actualizar labels, ajustar alturas de UI.

-------------------------------------------------------------------
4. ARCHIVO: register.html
-------------------------------------------------------------------
- Estado: Input de Sección manual.
- Hallazgos:
  · Sección era un campo de texto (causa inconsistencias).
  · Falta soporte visual para iOS PWA.
- Acción: Cambiar a <select> (A, B, C), añadir meta tags de Apple.

-------------------------------------------------------------------
5. ARCHIVOS HTML (Globales)
-------------------------------------------------------------------
- Hallazgos:
  · Desalineación vertical en el menú de navegación (items-top vs items-center).
  · Falta de iconos táctiles para Apple.
- Acción: Aplicar items-center en nav, añadir <link rel="apple-touch-icon">, ajustar mt- de contenedores.

-------------------------------------------------------------------
6. ARCHIVO: pseudocode.html
-------------------------------------------------------------------
- Estado: Simulación básica, UI no alineada con PSeInt oficial.
- Hallazgos:
  · El layout utiliza un diseño moderno con gradientes y bordes redondeados, muy diferente a la GUI clásica de PSeInt.
  · La lógica de ejecución en el script integrado es puramente simulativa (hardcoded strings).
  · Los paneles de "Comandos", "Variables" y "Operadores" no están organizados según el estándar de PSeInt.
  · El editor es un textarea básico sin resaltado de sintaxis dinámico ni numeración de líneas.
- Acción: Rediseñar UI para paridad visual con PSeInt, implementar un intérprete de pseudocódigo real y reestructurar paneles.

-------------------------------------------------------------------
7. ARCHIVO: pseudocode.html (Audit Complementaria [A-43])
-------------------------------------------------------------------
- Estado: Intérprete funcional para lógica básica, pero faltan estructuras avanzadas.
- Hallazgos:
  · Los botones de "Abrir" y "Guardar" no tienen funciones de I/O de archivos implementadas.
  · El Parser/Interpreter no soporta Arreglos (Dimensionamiento ni acceso por índice).
  · Faltan Funciones y Subprocesos (Definición y Llamadas con parámetros).
  · No existe lógica para la generación de Diagramas de Flujo (botón sin función).
  · Faltan operadores avanzados (MOD, RC, ABS, etc.).
- Acción: Implementar I/O de archivos .psc, soporte para arreglos y funciones, y generador de diagramas de flujo SVG.

AUDITORÍA DE FUNCIONALIDAD PSeInt (25/01/2026)
=============================================
1. [H-10] Fallo en Estructura SEGUN: El parser actual de SEGUN no detecta correctamente el fin de un bloque de caso si hay múltiples sentencias, lo que causa que solo se ejecute la primera sentencia del caso o que se salte sentencias importantes.
2. [H-11] Visualización de Diagramas de Flujo Básica: El generador de diagramas de flujo es puramente lineal y no representa visualmente las ramas de decisión (SI) ni los bucles, lo que limita su utilidad pedagógica.
3. [H-12] Operadores Multi-carácter: Se detectó que algunos operadores como <> o >= podrían ser interpretados incorrectamente si no se manejan como tokens únicos en el Tokenizer principal (aunque el tokenizeRaw parece manejarlos, hay que asegurar consistencia).
4. [H-13] Espaciado en ESCRIBIR: PSeInt añade un espacio entre argumentos en Escribir si se usan comas. Actualmente el simulador concatena sin espacios.
