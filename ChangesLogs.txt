Registro de cambios de IMA - Area de Informática V 2.0 

En este archivo se regustrara el historial de cambios del proyecto. 

09/01/2026
- Archivo: index.html, Línea(s): 203, 250
  - Se añadió un enlace "Portal" a la barra de navegación principal (vista de escritorio y móvil) para dirigir a los usuarios a `login.html`.
  - Se revirtió el cambio anterior que enlazaba incorrectamente el logo principal a `login.html`.

08/01/2026
- Archivo: js/teacher.js, Línea(s): 158-297
  - Se implementó la funcionalidad completa para añadir, eliminar y gestionar preguntas dinámicamente en el formulario de creación de exámenes.
  - Se corrigió el error `forEach` al guardar el examen, implementando la lógica para recopilar todos los datos del formulario, incluyendo las preguntas dinámicas, y construir un payload válido para la API.
  - Se añadió validación para impedir el envío de un examen sin preguntas.
- Archivo: js/api.js, Línea(s): 10-23
  - Se añadió un mock temporal a la función `fetchApi` para simular un login de "Profesor" y permitir las pruebas del frontend de forma aislada.
- Archivo: register.html, Línea(s): 44
  - Se corrigió un error de `ReferenceError` al añadir la importación del script `js/api.js`, que era necesario para el funcionamiento del formulario de registro.

08/01/2026
- Archivo: js/student.js, Línea(s): 12-17
  - Se implementó el `addEventListener` para el botón de `logout-button`, solucionando el bug que impedía al estudiante cerrar sesión.
- Archivo: js/student.js, Línea(s): 29-91
  - Se modificó la lógica de obtención de actividades para incluir una llamada a `getStudentExams`.
  - Se actualizó la función `renderActivities` para mostrar tanto tareas como exámenes, añadiendo un botón "Realizar Examen".
- Archivo: index.html, Línea(s): 201
  - Se actualizó el `href` del enlace principal para dirigir a `login.html`, conectando la página de inicio con el portal.

07/01/2026 
-Se creo los archicos README.md, Instrucciones.txt y Changeslogs.txt 
- Archivos relacionados README.md, Instrucciones.txt y Changeslogs.txt. 

09/01/2026
- Archivo: js/exam.js, Línea(s): ~37
  - Se realizó una investigación y diagnóstico del error "renderQuestion is not defined". Se determinó que la función `renderQuestion` es invocada en la función `loadExam` pero no se encuentra definida en el archivo, lo que interrumpe la carga de las preguntas del examen.

09/01/2026
- Archivo: js/exam.js, Línea(s): 102-182
  - Se implementó la función `renderQuestion(pregunta, index)` que faltaba. La función utiliza un `switch` para generar el HTML apropiado para los diferentes tipos de pregunta ('opcion_multiple', 'verdadero_falso', 'completacion', 'respuesta_breve', 'termino_pareado'), solucionando el error 'renderQuestion is not defined' que impedía la carga de los exámenes.

09/01/2026
- Archivo: js/exam.js, Línea(s): 194
  - Se eliminó un carácter de barra invertida (`\`) que causaba un error de sintaxis en la definición de una plantilla de cadena en la función `renderQuestion`. Este cambio permite que el script se analice y ejecute correctamente.

09/01/2026
- Archivo: js/exam.js, Línea(s): 192-194
  - Se eliminaron caracteres de escape (`\`) inválidos de una plantilla de cadena en el `case default` de la función `renderQuestion`, corrigiendo un bug menor introducido durante la implementación inicial.

09/01/2026
- Archivo: js/exam.js, Línea(s): 87-95, 116
  - Se modificó la función `submitExam` para corregir la recolección de respuestas de preguntas de 'termino_pareado', ajustando el selector de DOM. Además, se cambió la redirección final de `results.html` a `exam-submitted.html` para cumplir con el flujo de usuario correcto para estudiantes.
- Archivo: exam-submitted.html, Línea(s): 1-22
  - Se creó un nuevo archivo HTML para servir como página de confirmación después de que un estudiante entrega un examen.

10/01/2026
- Archivo: Múltiples (Refactorización)
  - Se consolidó la funcionalidad de `exam.html`, `results.html`, y `exam-submitted.html` en un único archivo `exam-manager.html`.
  - Se unificó la lógica de `js/exam.js` y `js/results.js` en un nuevo script `js/exam-manager.js`.
  - Se creó `css/exam-manager.css` para centralizar los estilos del nuevo módulo.
  - Se eliminaron los archivos HTML y JS obsoletos para reducir la fragmentación del código.
- Archivo: backend/exam-service/Code.gs, Línea(s): 55-60, 287-415
  - Se implementaron tres nuevas acciones en el backend para la calificación: `getExamSubmissions`, `getSubmissionDetails`, y `gradeSubmission`.
  - Se añadió lógica para evitar el uso de índices de columna hardcodeados en la función de calificación.
- Archivo: js/teacher.js, Línea(s): 81-119
  - Se modificó la vista del dashboard del profesor para agrupar las entregas por examen.
  - Se añadió un botón "Ver Entregas" que redirige al nuevo `exam-manager.html` para iniciar el flujo de calificación.
- Archivo: js/exam-manager.js, Línea(s): 90-220
  - Se implementó la lógica del frontend para el profesor, incluyendo la visualización de listas de entregas, la revisión detallada de respuestas y el formulario de calificación.

10/01/2026
- Archivo: js/student.js, Línea(s): 82
  - Se actualizó el `href` del botón "Realizar Examen" para que apunte a `exam-manager.html`, corrigiendo un enlace roto producto de la refactorización.
- Archivo: README.md, Línea(s): 30-50, 206-218
  - Se actualizó la documentación de la arquitectura y estructura de archivos del proyecto para reflejar la consolidación del módulo de exámenes en los nuevos archivos `exam-manager`.

11/01/2026
- Archivo: backend/exam-service/Code.gs, Línea(s): 190-204
  - Se modificó la función `getTeacherExamActivity` para incluir los campos `grado`, `seccion` y `asignatura` en los datos de las entregas de exámenes, proporcionando la información necesaria para el nuevo sistema de filtrado en el frontend.
- Archivo: teacher-dashboard.html, Línea(s): 29-57
  - Se añadieron nuevos controles de interfaz de usuario (dropdown y inputs de texto) al dashboard del profesor para permitir el filtrado de actividades por grado, sección y asignatura.
- Archivo: js/teacher.js, Línea(s): 3, 20-25, 120-151
  - Se implementó la lógica de filtrado en el lado del cliente. Se añadió un manejador de eventos al nuevo botón "Filtrar" que aplica los filtros seleccionados sobre una lista completa de actividades almacenada localmente.
  - Se añadió un botón "Limpiar" para resetear los filtros y mostrar todas las actividades.

11/01/2026
- Archivo: backend/task-service/Code.gs, Línea(s): 123-127, 163-174
  - Se corrigió un bug crítico en el dashboard del profesor que causaba que el enlace "Ver Archivo" para las entregas de tareas apareciera como `undefined`.
  - Se modificó la función `submitAssignment` para almacenar únicamente el ID del archivo de Google Drive en la hoja de cálculo, en lugar de una URL volátil.
  - Se actualizó la función `getTeacherActivity` para construir una URL de archivo estable y permanente usando el ID almacenado.
  - Adicionalmente, se corrigió un bug en la misma función que asignaba incorrectamente los datos de `grado` y `seccion` del estudiante, lo que rompía la funcionalidad de filtrado.

11/01/2026
- Archivo: js/config.js, Línea(s): 17, 20
  - Se actualizaron las URLs de los microservicios `TASK` y `EXAM` a las nuevas direcciones proporcionadas después de un redespliegue.

12/01/2026
- Archivo: Múltiples (Funcionalidad de Filtro Avanzado y Visualización de Archivos)
  - Se rediseñó completamente el sistema de filtrado del dashboard del profesor para implementar una navegación jerárquica (Grado > Sección > Alumno).
  - Se añadió un botón "Regresar" para facilitar la navegación entre los niveles del filtro.
  - Se implementó una nueva funcionalidad de visualización de archivos: las imágenes se abren en un modal "lightbox" y otros tipos de archivo se descargan directamente.
- Archivo: backend/task-service/Code.gs, Línea(s): 163-178, 185
  - Se corrigió un bug crítico que generaba URLs de archivo dañadas. La nueva lógica maneja de forma robusta tanto IDs de archivo como URLs antiguas para garantizar enlaces válidos.
  - Se añadió el almacenamiento y la devolución del `mimeType` del archivo en las entregas para dar soporte a la nueva funcionalidad de visualización.
- Archivo: backend/user-service/Code.gs, Línea(s): 61, 124-142
  - Se añadió una nueva acción `getStudentsByGroup` para obtener la lista de alumnos por grado y sección, alimentando el nuevo filtro jerárquico.
- Archivo: teacher-dashboard.html, Línea(s): 29-79, 194-201
  - Se reestructuró el HTML para reemplazar los filtros antiguos por la nueva interfaz de navegación por pasos y se añadió el modal para el lightbox.
- Archivo: js/teacher.js, (Completo)
  - Se reescribió por completo el script para manejar la nueva lógica de estado del filtro jerárquico, las llamadas a la API para poblar los selectores dinámicamente y la implementación del lightbox y la descarga de archivos.

12/01/2026
- Archivo: js/config.js, Línea(s): 12, 15
  - Se actualizaron las URLs de los microservicios `USER` y `TASK` a las nuevas direcciones proporcionadas después de un redespliegue.

12/01/2026
- Archivo: js/teacher.js, Línea(s): 21, 329-466
  - Se corrigió un bug que impedía el funcionamiento de los formularios "Crear Tarea" y "Crear Examen".
  - Se reintrodujeron los `addEventListener` para los eventos `submit` de ambos formularios, que se habían perdido durante una refactorización anterior.
  - Se restauró la lógica para la creación dinámica de preguntas en el formulario de exámenes.

18/01/2026
- Archivo: backend/user-service/Code.gs, backend/task-service/Code.gs, backend/exam-service/Code.gs
- Línea(s): N/A (doPost en todos los archivos)
  - Se refactorizó la función `doPost` en los tres microservicios para utilizar un bloque `try...catch...finally`. Este patrón garantiza que la cabecera `Access-Control-Allow-Origin: '*'` se aplique de forma robusta a todas las respuestas, solucionando un problema persistente de CORS.

18/01/2026
- Archivo: js/config.js, Línea(s): 17, 20, 23
  - Se aplicó una corrección para actualizar las URLs de los microservicios `USER`, `TASK`, y `EXAM` con el conjunto de direcciones correcto proporcionado después de una revisión de código fallida.

18/01/2026
- Archivo: js/config.js, Línea(s): 17, 20, 23
  - Se actualizaron las URLs de los microservicios `USER`, `TASK`, y `EXAM` a un nuevo conjunto de direcciones proporcionado por el PM.
