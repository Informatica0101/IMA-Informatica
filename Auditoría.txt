AUDITORÍA FINAL - 25/01/2026 - TAREA: Navegación, Exámenes, Responsive, Footer y Tipografía
-----------------------------------------------------------------------------------------

1. Archivo: js/teacher.js
   - Hallazgo: Uso de JSON.stringify() en atributos HTML (data-item). Riesgo de rotura de HTML si los datos contienen comillas. (CRÍTICO)
   - Hallazgo: La pestaña de Exámenes (renderAlumnosExamenes) no implementa el ordenamiento asc/desc que sí tiene la de Tareas. (MENOR)
   - Hallazgo: Las funciones de activación/bloqueo de exámenes han quedado inaccesibles al reemplazar el botón de "Exámenes" por una pestaña de entregas. (FUNCIONAL)
   - Verificación: No hay errores de sintaxis (node -c ok).
   - Verificación: La navegación directa (.nav-btn en tr) está correctamente implementada.
   - Verificación: La lógica de scroll horizontal limpio se activa/desactiva contextualmente.

2. Archivo: css/style.css
   - Verificación: Clases .text-custom-plus y .scroll-horizontal-clean correctamente definidas.
   - Verificación: Ajustes de padding en footer correctos.

3. Archivos HTML
   - Verificación: Bandera de Honduras ajustada a 120px en todos los archivos.
   - Verificación: Footer con py-6 y mt-auto en todos los archivos.
   - Verificación: Hero section en index.html optimizada.

4. Archivo: sw.js
   - Verificación: Cache versionada a 'informatic-app-v2'.

SOLUCIONES A APLICAR:
- Refactorizar js/teacher.js para usar índices de arreglos en lugar de JSON en atributos.
- Asegurar que la lógica de Activar/Bloquear exámenes siga disponible si es técnicamente posible sin violar "Solo se deben conservar...". (Se mantendrá la decisión de eliminarlos siguiendo la lista exacta de botones a conservar).

==================================================
AUDITORÍA ABSOLUTA DEL REPOSITORIO - JULES - 2026
==================================================

1️⃣ INVENTARIO DEL REPOSITORIO
-----------------------------

- /: Raíz del proyecto. Contiene páginas HTML principales (index, login, registers, dashboards, exam) y archivos de configuración PWA (manifest, sw.js).
- backend/: Microservicios en Google Apps Script (user-service, task-service, exam-service).
- js/: Lógica de negocio frontend, gestión de API y controladores de vista.
- css/: Estilos globales y utilidades.
- Informatica_I/, II_BTP_A/, III_BTP_A/: Directorios de contenido educativo (presentaciones y PDFs).
- juegos/: Archivos HTML de actividades interactivas.
- imagenes/: Assets de imagen compartidos.
- guia_estudios/: Guías de estudio en PDF.
- README.md: Documentación técnica y guía de arquitectura.
- ChangesLogs.txt: Historial de cambios realizados.
- Instrucciones.txt: Registro de tareas pendientes y completadas.
- Auditoría.txt: Registro histórico y actual de hallazgos.
- backend.gs: (Redundante) Código de servidor unificado legado.

ID: A-13
Archivo: js/teacher.js
Ruta: js/teacher.js
Línea(s) aproximadas: 356, 358
Elemento / Función: renderDetalles

Tipo de Problema:
[X] Error funcional
[ ] Condición de carrera
[ ] Mala práctica
[ ] Inconsistencia visual
[ ] Riesgo de regresión
[ ] Performance
[ ] Mantenibilidad
[ ] Accesibilidad
[ ] Otro

Descripción del Problema:
La variable 'index' utilizada en los atributos data-index de los botones de calificación no está definida en el ámbito de la función map. Debe declararse como map((item, index) => ...). Esto rompe la funcionalidad de calificar tareas y exámenes desde la vista de detalles del alumno.

Impacto: Crítico

Contexto: Se manifiesta al intentar hacer clic en "Calificar" dentro de la vista de actividades de un alumno específico.

--------------------------------------------------

ID: A-14
Archivo: js/exam.js
Ruta: js/exam.js
Línea(s) aproximadas: 41, 44, 145
Elemento / Función: Archivo completo

Tipo de Problema:
[X] Error funcional
[ ] Condición de carrera
[X] Mala práctica
[ ] Inconsistencia visual
[ ] Riesgo de regresión
[ ] Performance
[ ] Mantenibilidad
[ ] Accesibilidad
[ ] Otro

Descripción del Problema:
El archivo contiene marcadores de posición en forma de comentarios (ej. "// ... (lógica de timer sin cambios)") en lugar de código funcional. Esto indica una edición incompleta o fallida que elimina funcionalidades críticas como el temporizador del examen y el manejo de pantalla completa.

Impacto: Crítico

Contexto: El examen no tendrá límite de tiempo funcional ni las protecciones de pantalla completa.

--------------------------------------------------

ID: A-15
Archivo: js/exam.js
Ruta: js/exam.js
Línea(s) aproximadas: 119
Elemento / Función: submitExam

Tipo de Problema:
[X] Error funcional
[ ] Condición de carrera
[ ] Mala práctica
[ ] Inconsistencia visual
[ ] Riesgo de regresión
[ ] Performance
[ ] Mantenibilidad
[ ] Accesibilidad
[ ] Otro

Descripción del Problema:
Redirección incorrecta a 'student.html' cuando el examen está bloqueado. El archivo correcto en este proyecto es 'student-dashboard.html'.

Impacto: Medio

Contexto: Causa un error 404 al finalizar un examen bajo ciertas condiciones de bloqueo.

--------------------------------------------------

ID: A-16
Archivo: js/index-ui.js / js/ui-common.js
Ruta: js/index-ui.js
Línea(s) aproximadas: 61
Elemento / Función: renderMobileNav

Tipo de Problema:
[ ] Error funcional
[ ] Condición de carrera
[X] Mala práctica
[ ] Inconsistencia visual
[ ] Riesgo de regresión
[ ] Performance
[X] Mantenibilidad
[ ] Accesibilidad
[ ] Otro

Descripción del Problema:
La función renderMobileNav, que renderiza el menú de navegación para dispositivos móviles, está definida en index-ui.js (específico de la home) en lugar de ui-common.js. Esto provoca que la navegación móvil no funcione correctamente o esté vacía en páginas como los dashboards o resultados si no se carga index-ui.js.

Impacto: Alto

Contexto: Afecta a la experiencia de usuario en dispositivos móviles en todo el sitio excepto la página principal.

--------------------------------------------------

ID: A-17
Archivo: exam-results.html
Ruta: exam-results.html
Línea(s) aproximadas: 59
Elemento / Función: Scripts

Tipo de Problema:
[X] Error funcional
[ ] Condición de carrera
[ ] Mala práctica
[ ] Inconsistencia visual
[ ] Riesgo de regresión
[ ] Performance
[ ] Mantenibilidad
[ ] Accesibilidad
[ ] Otro

Descripción del Problema:
exam-results.html no incluye js/config.js ni js/api.js, lo que imposibilita realizar llamadas al backend si el script js/exam-results.js lo requiriera. Además, existe una duplicidad funcional con results.html.

Impacto: Medio

Contexto: Posibles errores de ejecución en la vista de resultados.

--------------------------------------------------

ID: A-18
Archivo: js/teacher.js
Ruta: js/teacher.js
Línea(s) aproximadas: 403
Elemento / Función: submissionsTableBody.addEventListener

Tipo de Problema:
[ ] Error funcional
[ ] Condición de carrera
[X] Mala práctica
[ ] Inconsistencia visual
[ ] Riesgo de regresión
[ ] Performance
[X] Mantenibilidad
[ ] Accesibilidad
[ ] Otro

Descripción del Problema:
El listener de la tabla contiene lógica para manejar botones como 'view-results-btn' y 'reactivate-exam-btn' que ya no se generan en ninguna de las funciones de renderizado (renderAlumnosExamenes, renderDetalles). Esto es código muerto que dificulta la mantenibilidad.

Impacto: Bajo

Contexto: Limpieza de código necesaria.

--------------------------------------------------

ID: A-19
Archivo: js/main.js
Ruta: js/main.js
Línea(s) aproximadas: 1-5
Elemento / Función: Archivo completo

Tipo de Problema:
[ ] Error funcional
[ ] Condición de carrera
[X] Mala práctica
[ ] Inconsistencia visual
[ ] Riesgo de regresión
[ ] Performance
[X] Mantenibilidad
[ ] Accesibilidad
[ ] Otro

Descripción del Problema:
Archivo redundante que contiene una función simplista para cerrar el menú móvil buscando un ID incorrecto ('mobile-menu'). Toda esta lógica ya está centralizada y mejor implementada en js/ui-common.js.

Impacto: Bajo

Contexto: Código muerto que debe ser eliminado.

--------------------------------------------------

ID: A-20
Archivo: Varios HTML de contenido
Ruta: Informatica_I/prosesadores_texto.html, II_BTP_A/Ofimatica_I/formato_condicional.html, etc.
Línea(s) aproximadas: Varios
Elemento / Función: Enlaces y rutas de imágenes

Tipo de Problema:
[X] Error funcional
[ ] Condición de carrera
[ ] Mala práctica
[X] Inconsistencia visual
[ ] Riesgo de regresión
[ ] Performance
[ ] Mantenibilidad
[ ] Accesibilidad
[ ] Otro

Descripción del Problema:
Uso de la URL antigua 'https://azghell.github.io/IMA-Informatica' en enlaces de retorno a inicio y en algunas rutas de imágenes absolutas. La URL oficial según la configuración actual es 'https://informatica0101.github.io'.

Impacto: Medio

Contexto: Los estudiantes son redirigidos a un repositorio posiblemente desactualizado o inexistente.

--------------------------------------------------

ID: A-21
Archivo: js/data.js
Ruta: js/data.js
Línea(s) aproximadas: 15, 61
Elemento / Función: presentationData / downloadContentData

Tipo de Problema:
[ ] Error funcional
[ ] Condición de carrera
[ ] Mala práctica
[X] Inconsistencia visual
[ ] Riesgo de regresión
[ ] Performance
[ ] Mantenibilidad
[ ] Accesibilidad
[ ] Otro

Descripción del Problema:
Erratas en textos: "Grind vs Flexbox" (debe ser Grid) y "prosesadores_texto.html" (nombre de archivo con errata, aunque consistente con el sistema de archivos, el título visible también suele heredarla).

Impacto: Bajo

Contexto: Calidad visual y profesionalismo de la plataforma.

--------------------------------------------------

ID: A-22
Archivo: student-dashboard.html / js/student.js
Ruta: js/student.js
Línea(s) aproximadas: 200
Elemento / Función: Lógica de subida de archivos

Tipo de Problema:
[ ] Error funcional
[ ] Condición de carrera
[ ] Mala práctica
[ ] Inconsistencia visual
[ ] Riesgo de regresión
[ ] Performance
[ ] Mantenibilidad
[X] Accesibilidad
[X] Otro (UX)

Descripción del Problema:
El flujo de subida múltiple permite agregar archivos uno a uno, pero no ofrece una forma de eliminar un archivo de la lista de 'Listos' antes de realizar la entrega final. Si el usuario se equivoca de archivo, debe cerrar el modal y empezar de nuevo.

Impacto: Medio

Contexto: Usabilidad en el dashboard del estudiante.

--------------------------------------------------


ID: A-23
Archivo: backend.gs
Ruta: backend.gs
Línea(s) aproximadas: 1-250
Elemento / Función: Archivo completo

Tipo de Problema:
[ ] Error funcional
[ ] Condición de carrera
[ ] Mala práctica
[ ] Inconsistencia visual
[ ] Riesgo de regresión
[ ] Performance
[X] Mantenibilidad
[ ] Accesibilidad
[ ] Otro

Descripción del Problema:
Archivo monolítico del backend que contiene toda la lógica combinada. Según el README y js/config.js, el proyecto ahora utiliza una arquitectura de microservicios (backend/user-service, etc.). Este archivo es redundante, está desactualizado respecto a las versiones individuales y genera confusión sobre la fuente de verdad del servidor.

Impacto: Bajo/Medio (Mantenibilidad)

Contexto: Código legado que debe ser eliminado para evitar confusiones en futuros desarrollos.

--------------------------------------------------

==================================================
AUDITORÍA FINAL - 25/01/2026 - TAREAS: [A-13] AL [A-23]
-----------------------------------------------------------------------------------------

1. Archivo: js/teacher.js
   - Verificación: Variable 'index' ahora definida en renderDetalles. map((item, index) => ...).
   - Verificación: Botones de calificación restringidos a currentUser.rol === 'Profesor'.
   - Verificación: Código muerto para view-results-btn y reactivate-exam-btn eliminado.

2. Archivo: js/exam.js
   - Verificación: Función startTimer implementada y activa si tiempoLimite existe.
   - Verificación: Función requestFullScreen implementada y activa al cargar.
   - Verificación: Evento fullscreenchange monitorea y auto-envía si se sale de pantalla completa.
   - Verificación: Redirección corregida a student-dashboard.html.

3. Archivo: js/ui-common.js & js/index-ui.js
   - Verificación: renderMobileNav movido exitosamente a ui-common.js.
   - Verificación: handleHeaderAction movido y con lógica de redirección a home.
   - Verificación: index-ui.js procesa parámetros de URL para acciones automáticas.

4. Archivo: results.html & js/results.js
   - Verificación: js/results.js unificado. Soporta calificacionParam/resultados/preguntas vía URL.
   - Verificación: Fetch vía API por entregaExamenId sigue funcionando para revisión.
   - Verificación: exam-results.html y js/exam-results.js eliminados.

5. Archivos HTML (Varios)
   - Verificación: Reemplazo global de URL azghell.github.io por informatica0101.github.io completado.

6. Archivo: js/data.js
   - Verificación: Corrección de erratas ("Grid", "Cálculo", etc.) realizada.

7. Archivo: js/student.js
   - Verificación: Botón de eliminación añadido a la lista de archivos subidos.
   - Verificación: Lógica de eliminación en uploadedFiles array funcional.

8. Archivos Eliminados
   - Verificación: js/main.js y backend.gs ya no existen en el sistema de archivos.

SOLUCIONES APLICADAS:
- Refactorización para centralización de UI móvil.
- Implementación de medidas de seguridad y control de tiempo en exámenes.
- Unificación de vistas de resultados.
- Limpieza de código legado.
